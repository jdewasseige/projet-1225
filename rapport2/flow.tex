\begin{tikzpicture}
[node distance = 7em]

\tikzstyle{output} = [diamond, draw, fill=blue!20, 
    text width=3em, text badly centered, node distance=3cm, inner sep=0pt]
\tikzstyle{block} = [rectangle, draw, fill=blue!20, 
    text width=15em, text centered, rounded corners, minimum height=4em]
\tikzstyle{line} = [draw, -latex']
\tikzstyle{input} = [draw, ellipse,fill=red!20, node distance=3cm,
    minimum height=2em]
    
\node [block] (primaire) {Reformage primaire (T)\\
	\ce{CH4 + H2O <=> CO + 3H2} \\
	\ce{CO + H2O <=> CO2 + H2}};
\node [input, left = 2em of primaire] (H2O) {\ce{H2O}};
\node [block, right = 2em of primaire] (four) {Four: Combustion \ce{CH4} ($\eta = 75\%$) 
($\simeq 1300K$)\\
	\ce{CH4 + 2O2 -> CO2 + 2H2O}};
\node [input, above = 3em of four] (O2) {\ce{O2}};
\node [input, above = 3em of primaire] (CH4) {\ce{CH4}};
\node [block, below of=primaire] (secondaire) {Reformage secondaire ($\simeq 1200K$)\\
	\ce{2CH4 + O2 -> 2CO + 4H2}};
\node [input, right = 1em of secondaire] (air) {Air ($21\% \ce{O2} 78\% \ce{N2} 
	1\% \ce{Ar}$)};
\node [block, below of=secondaire] (wgs) {Water-Gas-Shift ($\simeq 500-700K$)
	\ce{CO + H2O -> CO2 + H2}};
\node [block, below of=wgs] (abso) {Absorbtion du \ce{CO2} et compression};	
\node [output, right = 2em of abso] (CO22) {\ce{CO2}};	
\node [output, left = 2em of abso] (H2O2) {\ce{H2O}};
\node [block, below of=abso] (synthese) {Synthèse \ce{NH3} et séparation de l'argon \\
(Sortie réacteur: 270bar, 750K) \\
	\ce{3H2 + N2 <=> 2NH3}};
\node [output, below of=synthese] (NH3) {\ce{NH3}};
\node [output, right = 2em of synthese] (argon) {\ce{Ar}};


\path [line] (primaire) -- node[anchor = east] {\ce{H2} \ce{CH4} \ce{CO2} \ce{CO} \ce{H2O}}
	(secondaire);
\path [line] (four) -- node[anchor = south] {\textbf{E}}(primaire);
\path [line,dashed] (CH4) -- (four);
\path [line,dashed] (CH4) -- (primaire);
\path [line,dashed] (O2) -- (four);
\path [line] (secondaire) -- node[anchor = east] {\ce{H2} \ce{N2} \ce{CO2} \ce{CO} \ce{Ar} 
	\ce{H2O}}(wgs);
\path [line] (wgs) -- node[anchor = east] {\ce{H2} \ce{H2O} \ce{CO2} \ce{N2} \ce{Ar}}(abso);
\path [line] (abso) -- node[anchor = east] {\ce{H2} \ce{N2} \ce{Ar}}(synthese);
\path [line,dashed] (synthese) -- (NH3);
\path [line,dashed] (synthese) -- (argon);
\path [line,dashed] (air) -- (secondaire);
\path [line,dashed] (H2O) -- (primaire);
\path [line,dashed] (abso) -- (CO22);
\path [line,dashed] (abso) -- (H2O2);

\end{tikzpicture}

